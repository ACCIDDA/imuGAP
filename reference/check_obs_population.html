<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Validate obs_population object for imuGAP — check_obs_population • imuGAP</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Validate obs_population object for imuGAP — check_obs_population"><meta name="description" content="Validate obs_population object for imuGAP
Check observation meta data object"><meta property="og:description" content="Validate obs_population object for imuGAP
Check observation meta data object"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">imuGAP</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/imuGAP.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Validate <code>obs_population</code> object for <code>imuGAP</code></h1>

      <div class="d-none name"><code>check_obs_population.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Validate <code>obs_population</code> object for <code>imuGAP</code></p>
<p>Check observation meta data object</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_obs_population</span><span class="op">(</span></span>
<span>  <span class="va">obs_population</span>,</span>
<span>  <span class="va">observations</span>,</span>
<span>  <span class="va">locations</span>,</span>
<span>  <span class="va">max_cohort</span>,</span>
<span>  <span class="va">max_age</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">check_obs_population</span><span class="op">(</span></span>
<span>  <span class="va">obs_population</span>,</span>
<span>  <span class="va">observations</span>,</span>
<span>  <span class="va">locations</span>,</span>
<span>  <span class="va">max_cohort</span>,</span>
<span>  <span class="va">max_age</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-obs-population">obs_population<a class="anchor" aria-label="anchor" href="#arg-obs-population"></a></dt>
<dd><p>a data.frame, the the observation weighting object, with columns</p><ul><li><p>obs_id, the observation id the row concerns</p></li>
<li><p>dose, which dose the row concerns</p></li>
<li><p>location, the location the row concerns</p></li>
<li><p>cohort, the cohort at that location the row concerns</p></li>
<li><p>age, the age of that cohort the row concerns</p></li>
<li><p>weight, the relative contribution of this row to an observation
Note that multiple rows may concern the same observation, meaning that the populations
from different cohorts, locations, and ages may be pooled in an observation</p></li>
</ul></dd>


<dt id="arg-observations">observations<a class="anchor" aria-label="anchor" href="#arg-observations"></a></dt>
<dd><p>a <code>data.frame</code> with:</p><ul><li><p>nonnegative integer <code>positive</code> column</p></li>
<li><p>positive integer <code>sample_n</code> column, which must be greater than or equal
to the <code>positive</code> column</p></li>
<li><p>optionally, an <code>id</code> column, 1:size(observations)</p></li>
</ul></dd>


<dt id="arg-locations">locations<a class="anchor" aria-label="anchor" href="#arg-locations"></a></dt>
<dd><p>a <code>data.frame</code>, with integer columns <code>id</code> and <code>parent_id</code>.
See Details for restrictions.</p></dd>


<dt id="arg-max-cohort">max_cohort<a class="anchor" aria-label="anchor" href="#arg-max-cohort"></a></dt>
<dd><p>if present, what is the maximum cohort that should be present?</p></dd>


<dt id="arg-max-age">max_age<a class="anchor" aria-label="anchor" href="#arg-max-age"></a></dt>
<dd><p>if present, what is the maximum age that should be present?</p></dd>


<dt id="arg-max-obs-id">max_obs_id<a class="anchor" aria-label="anchor" href="#arg-max-obs-id"></a></dt>
<dd><p>optional positive integer, the maximum valid observation id</p></dd>


<dt id="arg-max-location">max_location<a class="anchor" aria-label="anchor" href="#arg-max-location"></a></dt>
<dd><p>optional positive integer, the maximum valid location id</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>logical; if <code>FALSE</code> (default), observations must be complete.
If <code>TRUE</code>, <code>max_obs_id</code> must be provided.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>if <code>x</code> is valid, returns the canonical <code>obs_population</code> object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A valid <code>obs_population</code> object must:</p><ul><li><p>be convertible to a <code>data.table</code> via <code><a href="https://rdatatable.gitlab.io/data.table/reference/setDT.html" class="external-link">data.table::setDT()</a></code></p></li>
<li><p>contain the columns "obs_id", "location", "cohort", "age", "dose", and
"weight"</p></li>
<li><p>obs_id, integers &gt;= 1; if <code>max_obs_id</code> is provided, &lt;= <code>max_obs_id</code>;
if <code>subset</code> is <code>FALSE</code>, all integers 1:<code>max_obs_id</code> must be present</p></li>
<li><p>location must be a positive integer less than or equal to <code>max_location</code>.
however, not all locations need to be represented in <code>wts</code></p></li>
<li><p>cohort must be a positive integer</p></li>
<li><p>age must be a positive integer</p></li>
<li><p>dose must be 1 or 2</p></li>
<li><p>weight must be a positive numeric value; weights must sum to 1 by obs_id</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="errors">Errors<a class="anchor" aria-label="anchor" href="#errors"></a></h2>


<p>If <code>x</code> is not valid, raises an error describing the issue.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Carl Pearson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

